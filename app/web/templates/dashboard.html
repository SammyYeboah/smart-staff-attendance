{% extends "base.html" %}
{% block content %}
<section class="dashboard">
  <h2>Welcome, {{ name }}</h2>
  <p class="date">Today: {{ today_date }}</p>

  <div class="status-card {{ my_today.status_class }}">
    <h3>Status: {{ my_today.status }}</h3>
    <p>Clock In: {{ my_today.clock_in or "—" }}</p>
    <p>Clock Out: {{ my_today.clock_out or "—" }}</p>
  </div>

  <div class="actions">
    <form id="clockInForm" method="post" action="/attendance/clock-in">
      <input type="hidden" id="latitude_in" name="latitude">
      <input type="hidden" id="longitude_in" name="longitude">
      <button type="submit" class="btn btn-primary">Clock In</button>
    </form>

    <form id="clockOutForm" method="post" action="/attendance/clock-out">
      <input type="hidden" id="latitude_out" name="latitude">
      <input type="hidden" id="longitude_out" name="longitude">
      <button type="submit" class="btn btn-secondary">Clock Out</button>
    </form>
  </div>
</section>

<script>
navigator.geolocation.getCurrentPosition(function(pos) {
  document.getElementById("latitude_in").value = pos.coords.latitude;
  document.getElementById("longitude_in").value = pos.coords.longitude;
  document.getElementById("latitude_out").value = pos.coords.latitude;
  document.getElementById("longitude_out").value = pos.coords.longitude;
});
</script>
{% endblock %}
